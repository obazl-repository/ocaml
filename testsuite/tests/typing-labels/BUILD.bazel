load("//test:rules.bzl",
     "module_program_tests",
     "test_module",
     "batch_tests"
)
load("//config:WARNINGS.bzl", "w")

test_suite(
    name            = "typing-labels",
    tests           = [
        ":Mixin_tests",
        ":Mixin2_tests",
        ":Mixin3_tests",
    ],
)

#####################
module_program_tests(
    name              = "Mixin_tests",
    structfile        = "mixin.ml",
    stdlib_deps     = [
        "//stdlib:CamlinternalOO",
        "//stdlib:Stdlib.MoreLabels",
        "//stdlib:Stdlib.StdLabels"
    ],
    warnings = [w.OPEN_SHADOW_IDENTIFIER_44, w.UNUSED_VAR_STRICT_27],
    stdout_expected   = "mixin.reference",
)

#####################
module_program_tests(
    name              = "Mixin2_tests",
    structfile        = "mixin2.ml",
    stdlib_deps     = [
        "//stdlib:CamlinternalOO",
        "//stdlib:Stdlib.MoreLabels",
        "//stdlib:Stdlib.StdLabels"
    ],
    warnings = ["open-shadow-identifier", "unused-var-strict"],
    stdout_expected   = "mixin2.reference",
)

#####################
module_program_tests(
    name              = "Mixin3_tests",
    structfile        = "mixin3.ml",
    stdlib_deps     = [
        "//stdlib:CamlinternalOO",
        "//stdlib:Stdlib.MoreLabels",
        "//stdlib:Stdlib.StdLabels"
    ],
    warnings = ["open-shadow-identifier", "unused-var-strict"],
    stdout_expected   = "mixin3.reference",
)
