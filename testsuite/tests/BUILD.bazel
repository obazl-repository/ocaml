load("@bazel_skylib//rules:common_settings.bzl", "bool_flag")

## enable set -x etc. in sh runner
bool_flag(name = "verbose", build_setting_default = False,
          visibility = ["//testsuite:__subpackages__"])
config_setting(name = "verbose?", flag_values = {":verbose": "True"},
          visibility = ["//testsuite:__subpackages__"])

bool_flag( name = "with-stdlib", build_setting_default = False)
config_setting(name = "with-stdlib?",
               flag_values = {":with-stdlib": "True"})

test_suite(
    name = "tests",
    tests = [
        "//testsuite/tests/asmgen",
        "//testsuite/tests/array-functions",
        "//testsuite/tests/basic",
        "//testsuite/tests/basic-modules",
        "//testsuite/tests/lib-arg",
        "//testsuite/tests/lib-bigarray",
        "//testsuite/tests/lib-atomic",

        "//testsuite/tests/typing-labels",
        "//testsuite/tests/typing-misc",

        "//testsuite/tests/typing-missing-cmi",
        "//testsuite/tests/typing-missing-cmi-2",
        "//testsuite/tests/typing-missing-cmi-3",

        "//testsuite/tests/warnings"
    ],
)
